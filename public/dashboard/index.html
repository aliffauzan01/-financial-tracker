<!DOCTYPE html>
<html>
<body>
<h1>Dashboard</h1>

<p id="info">Memuat...</p>

<button onclick="location.href='/todos'">Ke Todos</button>
<button onclick="logout()">Logout</button>

<script>
async function loadMe() {
  const res = await fetch("/api/me")
  const data = await res.json()

  if (!data.success) {
    location.href = "/login"
    return
  }

  document.getElementById("info").innerText =
    "Halo, " + data.user.username
}
loadMe()

async function logout() {
  await fetch("/api/logout", { method: "POST" })
  location.href = "/login"
}
</script>
</body>
</html>
